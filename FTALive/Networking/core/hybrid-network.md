# 3. ハイブリッドネットワークを展開するための設計ポイント

本章では Azure をオンプレミスの拡張データセンターやリフトアンドシフト先として利用する場合の設計ポイントを紹介します。

## 設計～展開のステップ

Azure 上へのネットワークの展開は、いずれのサービスも Azure ポータルから数ステップで展開でき、複雑な構成であっても数十分から数時間で展開できます。リソースの作成は非常に簡単ですが、後から変更できない設定が存在することや、後でネットワークの構成を変えるためにダウンタイムが発生することもあります。従って、オンプレミスのネットワーク設計同様、Azure へのネットワーク展開においても設計は非常に重要です。

以下に、Azure のネットワーク展開の流れを紹介します。主に設計にフォーカスし、それぞれのステップのポイントを解説していきます。

```mermaid
flowchart LR
    subgraph 設計
        direction LR
        1[1. ネットワーク トポロジの検討]-->2[2. 接続方法の検討]-->3[3. セキュリティの検討]-->4[4. リソース構成の検討]
    end
    subgraph 展開
        direction LR
        5[5. リソース展開]-->6[6. テスト]
    end
    設計-->展開
```

## 3.1. ネットワーク トポロジの検討

ネットワークの設計を考える上でまず重要なことは全体のトポロジです。トポロジの設計を疎かにすると、場当たり的なネットワーク展開をすることとなり、可用性や運用性、セキュリティの低下につながります。

トポロジを検討する上で意識することは、東西トラフィックと南北トラフィックです。東西トラフィックは、仮想ネットワーク間やデータセンター間、リージョン間のような`横`のつながりで発生するトラフィックです。一方で、南北トラフィックは、インターネットとの接続やオンプレミスとの接続等、データセンターから出ていく`縦`のつながりで発生するトラフィックです。

以下にトポロジの検討ポイントをまとめました。

|東西南北| ポイント |考慮事項|検討の重要性|
|--|:-------|------|---------|
|南北|インターネットへの接続|Azure の仮想ネットワーク内のリソース発信でインターネットへ接続する要件があるか確認します。<br>よくあるトラフィックとして、OS の更新プログラムの取得やミドルウェア、監視に利用される通信があります。|必須|
|南北|インターネットからの接続||必須|
|東西|複数ネットワークの接続|ネットワーク境界/既存の環境と接続/ゾーン、リージョン|状況に応じて|
|南北|オンプレミスとの接続||状況に応じて|


## 3.2. 接続方法の検討

## 3.3. セキュリティの検討

## 3.4. リソース構成の検討
